<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="assets/scripts/gsap/3.12.2/gsap.min.js"></script>
    <link href="output.css" rel="stylesheet" />
    <script src="catalog.js" type="text/javascript"></script>
    <script src="catalog-navigator.js" type="text/javascript"></script>
  </head>
  <body>
    <main class="overflow-hidden">
      <section class="mx-auto grid gap-6 p-6 max-w-[1000px]">
        <section class="flow-root">
          <a href="index.html" class="float-left">
            <p
              class="text-md pr-4 font-semibold leading-4.5 uppercase text-black"
            >
              Сборник каталогов
              <br />художественных<br />выставок
            </p>
            <hr class="h-0.5 my-3 bg-black border-0" />
          </a>
          <a href="index.html" class="float-left">
            <p class="text-md font-semibold leading-4.5 uppercase text-white">
              The collection of catalogs
              <br />artistic exhibitions<br />Russia-USSR XIX-XX century
            </p>
            <hr class="h-0.5 my-3 bg-white border-0" />
          </a>
          <div
            class="py-1 px-3 text-sm border text-white border-white rounded-2xl float-right"
          >
            Личный кабинет
          </div>
        </section>
        <section>
          <form id="search-form">
            <div class="relative">
              <input
                type="search"
                id="search-text"
                class="block w-full py-2 pl-4 pr-10 text-md bg-white rounded-2xl placeholder:truncate focus:outline-none"
                placeholder="Поиск выставок, художников, картин, мест проведения"
                required
              />
              <button
                type="submit"
                id="search-submit"
                class="absolute end-2.5 bottom-2.5 px-4 py-2.5"
              >
                <div
                  class="absolute inset-y-0 start-0 flex items-center ps-2 pointer-events-none"
                >
                  <svg
                    class="w-5 h-5 text-gray-500"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 20 20"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                    />
                  </svg>
                </div>
              </button>
            </div>
          </form>
        </section>

        <section class="flex flex-col text-white font-cambria">
          <div class="flex gap-4">
            <div class="self-start w-4/10">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
              </div>
            </div>
            <div class="w-6/10">
              <div class="flex flex-col gap-3">
                <span>125</span>
                <span class="text-2xl">Мир искусства: Выставка картин</span>
                <span
                  >Мир искусства: Выставка картин: Каталог. СПб., 1912. 30, [2]
                  с. 18,5 × 12,5. 20 к</span
                >
                <span class="italic"
                  >Издательская иллюстрированная обложка.</span
                >
                <p>
                  Проходила в январе в Петербурге, на Невском проспекте, 45.
                  Участвовало 56 художников. Экспонировано 451 произведение.
                  Впервые приняли участие Н. Калмаков и М. Шагал. Ретроспектива
                  выставки М. К. Чюрлёниса (1875-1911; до 1955 использовалась
                  русская форма имени Николай К. Чурлянис).
                </p>
                <hr class="h-0.5 bg-white/30 border-0" />
                <span
                  >Мир искусства: Выставка картин: Каталог. 2-е изд. СПб., 1912.
                  31, [1] с. 18,5 × 12,5. 20 к.</span
                >
                <span class="italic"
                  >Издательская иллюстрированная обложка с серебряным
                  тиснением.</span
                >
                <p>
                  Вышло три издания каталога. Во втором издании каталога изъяты
                  № 16-18, 58, 61-65, 213-216, 246, 255-259, 263, 282, 284-285,
                  292, 332. Добавлены № 168а, 224а, 260а, 302а, 329а, 338а (М.
                  Шагал, которого не было среди участников в первом издании),
                  386а. Изменился список работ М. Чюрлёниса, а также их
                  нумерация.
                </p>
                <hr class="h-0.5 bg-white/30 border-0" />
                <p>Третье издание идентично второму.</p>
              </div>
            </div>
          </div>
        </section>

        <hr class="h-[0.5px] bg-white border-0" />
      </section>

      <section class="mx-auto grid gap-6 px-6 py-2 max-w-[1000px]">
        <section class="relative">
          <spreads-navigator
            id="spreadsNavigatorComponent"
            image-src="https://raw.githubusercontent.com/akarak/catalogs/refs/heads/gh-pages/assets/data/K3519/stripes/K3519_0001_0077.jpg"
            total-spreads="77"
            class="h-[30px]"
          ></spreads-navigator>

          <div
            id="spreadTooltip"
            class="absolute hidden whitespace-nowrap pointer-events-none z-50"
          >
            <span id="spreadNumber" class="text-white/90 font-cambria text-lg"
              >0</span
            >
          </div>
        </section>

        <section
          class="flex flex-col flex-1 select-none touch-callout-none tap-highlight-transparent"
        >
          <div
            id="imagesSection"
            class="relative flex flex-col items-center justify-center bg-gray-200/00"
          >
            <div
              id="imageContainer"
              class="flex flex-col items-center justify-center pointer-events-none bg-yellow-200/0"
            >
              <!-- Изображения будут добавлены динамически -->
            </div>

            <div
              id="loader"
              class="absolute w-12 h-12 border-4 border-gray-400 rounded-full border-t-gray-200 animate-spin z-40 hidden"
            ></div>

            <div
              id="clickLayer"
              class="absolute w-full h-full flex z-50"
              tabindex="-1"
            >
              <div
                class="w-1/2 left-0 cursor-pointer bg-red-500/00"
                data-direction="left"
              ></div>
              <div
                class="w-1/2 right-0 cursor-pointer bg-green-500/00"
                data-direction="right"
              ></div>
            </div>
          </div>

          <div class="py-1 flex items-center justify-center z-50">
            <p
              id="counter"
              class="text-white/90 text-lg font-cambria whitespace-nowrap"
            >
              1 из 77
            </p>
          </div>
        </section>
      </section>
    </main>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function (event) {
        document
          .getElementById("search-submit")
          .addEventListener("click", function () {
            window.location.href = "search-result.html";
          });

        document
          .getElementById("search-form")
          .addEventListener("submit", function (event) {
            event.preventDefault();
            document.getElementById("search-submit").click();
          });

        // Регистрируем web component
        customElements.define("spreads-navigator", CatalogSpreadsNavigator);

        const spreadsNavigator = document.getElementById("spreadsNavigatorComponent");
        const spreadNumber = document.getElementById("spreadNumber");

        spreadsNavigator.addEventListener("spread-click", (event) => {
          changeImageByIndex(event.detail.spreadNumber - 1);
        });
        spreadsNavigator.addEventListener("current-spread-change", (event) => {
          spreadNumber.textContent = event.detail.spreadNumber;
        });

        const spreadTooltip = document.getElementById("spreadTooltip");
        spreadsNavigator.addEventListener("mouseenter", () => {
          spreadTooltip.classList.remove("hidden");
        });

        spreadsNavigator.addEventListener("mouseleave", () => {
          spreadTooltip.classList.add("hidden");
        });
      });
    </script>
  </body>
</html>
