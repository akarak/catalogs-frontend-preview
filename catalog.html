<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="assets/scripts/gsap/3.12.2/gsap.min.js"></script>
    <link href="styles/output.css" rel="stylesheet" />
    <script
      src="components/catalog-navigator.js"
      type="text/javascript"
    ></script>
    <script src="components/catalog-viewer.js" type="text/javascript"></script>
    <script src="components/logo-small.js" type="text/javascript"></script>
    <script src="components/search-form.js" type="text/javascript"></script>
  </head>
  <body>
    <main class="overflow-hidden">
      <section class="mx-auto grid gap-6 p-6 max-w-[1000px]">
        <section id="header" class="flow-root">
          <logo-small></logo-small>
          <div
            class="py-1 px-3 text-sm border text-white border-white rounded-2xl float-right"
          >
            Личный кабинет
          </div>
        </section>
        <section>
          <search-form id="search-component"></search-form>
        </section>

        <section class="flex flex-col text-white font-cambria">
          <div class="flex gap-4">
            <div class="self-start w-4/10">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
                <img
                  class="h-auto max-w-full drop-shadow-image-xs"
                  src="assets\covers\K1859.jpg"
                  alt="K1859. Осенняя выставка картин"
                />
              </div>
            </div>
            <div class="w-6/10">
              <div class="flex flex-col gap-3">
                <span>125</span>
                <span class="text-2xl">Мир искусства: Выставка картин</span>
                <span
                  >Мир искусства: Выставка картин: Каталог. СПб., 1912. 30, [2]
                  с. 18,5 × 12,5. 20 к</span
                >
                <span class="italic"
                  >Издательская иллюстрированная обложка.</span
                >
                <p>
                  Проходила в январе в Петербурге, на Невском проспекте, 45.
                  Участвовало 56 художников. Экспонировано 451 произведение.
                  Впервые приняли участие Н. Калмаков и М. Шагал. Ретроспектива
                  выставки М. К. Чюрлёниса (1875-1911; до 1955 использовалась
                  русская форма имени Николай К. Чурлянис).
                </p>
                <hr class="h-0.5 bg-white/30 border-0" />
                <span
                  >Мир искусства: Выставка картин: Каталог. 2-е изд. СПб., 1912.
                  31, [1] с. 18,5 × 12,5. 20 к.</span
                >
                <span class="italic"
                  >Издательская иллюстрированная обложка с серебряным
                  тиснением.</span
                >
                <p>
                  Вышло три издания каталога. Во втором издании каталога изъяты
                  № 16-18, 58, 61-65, 213-216, 246, 255-259, 263, 282, 284-285,
                  292, 332. Добавлены № 168а, 224а, 260а, 302а, 329а, 338а (М.
                  Шагал, которого не было среди участников в первом издании),
                  386а. Изменился список работ М. Чюрлёниса, а также их
                  нумерация.
                </p>
                <hr class="h-0.5 bg-white/30 border-0" />
                <p>Третье издание идентично второму.</p>
              </div>
            </div>
          </div>
        </section>

        <hr class="h-[0.5px] bg-white border-0" />
      </section>

      <section class="mx-auto grid gap-6 px-6 py-2 max-w-[1000px]">
        <section class="relative">
          <div
            id="spreadTooltip"
            class="absolute hidden whitespace-nowrap pointer-events-none z-50 top-0 -translate-y-full"
          >
            <span id="spreadNumber" class="text-white/90 font-cambria text-lg"
              >0</span
            >
          </div>
          <catalog-spreads-navigator
            id="spreadsNavigatorComponent"
            image-src="https://raw.githubusercontent.com/akarak/catalogs/refs/heads/gh-pages/assets/data/K3519/stripes/K3519_0001_0077.jpg"
            total-spreads="77"
            class="h-[30px]"
          ></catalog-spreads-navigator>
        </section>

        <section
          class="flex flex-col flex-1 select-none touch-callout-none tap-highlight-transparent"
        >
          <div
            id="imagesSection"
            class="relative flex flex-col items-center justify-center bg-gray-200/0"
          >
            <catalog-spreads-viewer
              id="spreadsViewerComponent"
              base-path="https://raw.githubusercontent.com/akarak/catalogs/refs/heads/gh-pages/assets/data/K3519/pages/K3519"
              first-spread="1"
              total-spreads="77"
              class=""
            ></catalog-spreads-viewer>
            <div class="py-1 flex items-center justify-center z-50">
              <p
                id="spreadsViewerSpread"
                class="text-white/90 text-lg font-cambria whitespace-nowrap"
              >
                1 из 77
              </p>
            </div>
          </div>
        </section>
      </section>
    </main>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function (event) {
        const searchComponent = document.getElementById("search-component");

        searchComponent.addEventListener("search", function () {
          window.location.href = "search-result.html";
        });

        const spreadsNavigator = document.getElementById(
          "spreadsNavigatorComponent"
        );
        const spreadNumber = document.getElementById("spreadNumber");

        const spreadsViewer = document.getElementById("spreadsViewerComponent");
        const spreadsViewerSpread = document.getElementById(
          "spreadsViewerSpread"
        );

        spreadsNavigator.addEventListener("spread-click", (event) => {
          spreadsViewer.goTo(event.detail.spreadNumber);
        });
        spreadsNavigator.addEventListener("current-spread-change", (event) => {
          spreadNumber.textContent = event.detail.spreadNumber;
        });

        const spreadTooltip = document.getElementById("spreadTooltip");
        spreadsNavigator.addEventListener("mouseenter", () => {
          spreadTooltip.classList.remove("hidden");
        });

        spreadsNavigator.addEventListener("mouseleave", () => {
          spreadTooltip.classList.add("hidden");
        });

        spreadsViewer.addEventListener("current-spread-change", (event) => {
          spreadsViewerSpread.textContent = `${event.detail.spreadNumber} из ${spreadsViewer.totalSpreads}`;
        });
        console.log(spreadsViewer);
      });
    </script>
  </body>
</html>
